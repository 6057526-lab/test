"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è Telegram-–±–æ—Ç–∞ —É—á—ë—Ç–∞ —Ö–æ–∫–∫–µ–π–Ω–æ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
"""
import os
from pathlib import Path
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞
# –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ, –ø–æ—Ç–æ–º –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π
env_path = Path('.env')
if not env_path.exists():
    env_path = Path('../.env')

load_dotenv(env_path)

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω)
# –ü–æ–ª—É—á–∞–µ–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
TOKEN = os.getenv('BOT_TOKEN', 'YOUR_BOT_TOKEN_HERE')

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
if TOKEN == 'YOUR_BOT_TOKEN_HERE':
    error_message = (
        "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞!\n"
        "üìù –í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞:\n"
        "   1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ: BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å\n"
        "   2. –ò–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ 'YOUR_BOT_TOKEN_HERE' –ø—Ä—è–º–æ –≤ config.py\n"
        "   3. –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è: export BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω\n\n"
        "ü§ñ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω:\n"
        "   1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram\n"
        "   2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot\n"
        "   3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º\n"
        "   4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤–∏–¥–∞: 1234567890:ABCdefGHIjklmNOpqrsTUVwxyz"
    )
    raise ValueError(error_message)

# –ü—É—Ç–∏
BASE_DIR = Path(__file__).parent
DATA_DIR = BASE_DIR / 'data'
DB_PATH = DATA_DIR / 'db.sqlite3'
UPLOADS_DIR = BASE_DIR / 'uploads'

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
DATA_DIR.mkdir(exist_ok=True)
UPLOADS_DIR.mkdir(exist_ok=True)

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL = f'sqlite:///{DB_PATH}'

# ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (Telegram ID)
# –ü–æ–ª—É—á–∞–µ–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç—ã–π —Å–ø–∏—Å–æ–∫
admin_ids_env = os.getenv('ADMIN_IDS', '')
if admin_ids_env:
    ADMIN_IDS = [int(id.strip()) for id in admin_ids_env.split(',') if id.strip().isdigit()]
else:
    ADMIN_IDS = [
        # 123456789,  # –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    ]

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç –∞–¥–º–∏–Ω–æ–≤
if not ADMIN_IDS:
    import warnings
    warnings.warn(
        "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ —É–∫–∞–∑–∞–Ω—ã ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤! "
        "–î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é ADMIN_IDS –≤ config.py –∏–ª–∏ –≤ .env —Ñ–∞–π–ª",
        UserWarning
    )

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤
DEFAULT_CURRENCY = 'EUR'
DEFAULT_COEFFICIENT = 1.2  # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# –¢–∏–ø—ã —Ñ–∏—Ç–∞
FIT_TYPES = ['regular', 'tapered', 'wide']

# –†–∞–∑–º–µ—Ä—ã
SIZES = ['YTH', 'JR', 'INT', 'SR', 'XS', 'S', 'M', 'L', 'XL', '2XL', '3XL']

# –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
AGE_CATEGORIES = ['YTH', 'JR', 'INT', 'SR']

# –®–∞–±–ª–æ–Ω Excel –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
EXCEL_TEMPLATE_COLUMNS = [
    'EAN', '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ', '–ú–æ–¥–µ–ª—å', '–¶–≤–µ—Ç', '–†–∞–∑–º–µ—Ä',
    '–í–æ–∑—Ä–∞—Å—Ç', '–§–∏—Ç', '–í–µ—Å', '–ö–æ–ª-–≤–æ', '–¶–µ–Ω–∞ –≤ –µ–≤—Ä–æ',
    '–ö—É—Ä—Å', '–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç', '–õ–æ–≥–∏—Å—Ç–∏–∫–∞ (–Ω–∞ –∫–≥)', '–°–∫–ª–∞–¥'
]

# –°–∫–ª–∞–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_WAREHOUSES = ['–û–ª–µ–≥', '–ú–∞–∫—Å–∏–º', '–û–±—â–∏–π']

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ–Ω—É—Å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_BONUS_RULES = [
    {'min_amount': 0, 'max_amount': 50000, 'percent': 5},
    {'min_amount': 50000, 'max_amount': 100000, 'percent': 7},
    {'min_amount': 100000, 'max_amount': 200000, 'percent': 10},
    {'min_amount': 200000, 'max_amount': float('inf'), 'percent': 12},
]

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
CURRENCY_FORMAT = '{:,.2f} ‚ÇΩ'
PERCENT_FORMAT = '{:.1f}%'

# –õ–∏–º–∏—Ç—ã
MAX_EXCEL_FILE_SIZE = 10 * 1024 * 1024  # 10 MB
MAX_PRODUCTS_PER_BATCH = 1000

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_ACTIONS = True  # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ action_log